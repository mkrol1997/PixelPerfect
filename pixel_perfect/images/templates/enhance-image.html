{% extends 'base.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block content %}

    <div class="col-xl-12 d-flex justify-content-center" style="margin-top: 100px">
        <form method="POST" enctype="multipart/form-data" id="image_form">
            {% csrf_token %}
            <div class="col-8">
                {{ form | crispy }}
             </div>
            <input type="submit" value="Process" onclick="modal()" class="btn btn-primary" id="submit">
        </form>
    </div>

    <div class="modal fade" id="exampleModal1" tabindex="-1">

        <div class="modal-dialog modal-lg " role='document' id="image-modal">
            <div class="modal-content h-60 ">
                <div class="d-flex align-items-center" style="background-color: none;">
                    <img id="new-image" src="" class="img-fluid mr-auto ml-auto" style="height: 60vh">
                </div>
                <div class="modal-footer bg-dark">
                    <button type="button" class="btn btn-secondary mr-auto" data-dismiss="modal">Close</button>
                    <a href="#" type="button" class="btn btn-secondary ml-auto" id="download">Download</a>
                    <a href="#" type="button" class="btn btn-primary" id="saveGDrive">GDrive</a>
                </div>
            </div>
        </div>
        <div class="loader text-center" id="loader">
            <div class="loading ml-auto mr-auto">
                <span></span>
                <span></span>
                <span></span>
                <span></span>
            </div>
            <div class="loader-message m-5 bg-dark rainbow-text">
                <h2 class="font-weight-bold">Please wait while we do our magic!</h2>
            </div>
        </div>
    </div>

    <script src="{% static 'js/fetch_enhanced_img.js' %}"></script>
    <script src="{% static 'js/form_validation.js' %}"></script>
    <script>
        $("#file-upload").css("opacity", "0");

        $("#file-browser").click(function(e) {
          e.preventDefault();
          $("#file-upload").trigger("click");
        });

    </script>
{% endblock %}
